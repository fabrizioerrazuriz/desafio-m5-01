name: Deploy to EC2
on:
push:
branches:
- main
jobs:
deploy:
runs-on: ubuntu-latest
steps:
- name: Checkout code
uses: actions/checkout@v3
- name: Copy files to EC2
run: |
ssh -o StrictHostKeyChecking=no -i ~/.ssh/id_rsa ec2-user@<204.236.202.80>
"mkdir -p /home/ec2-user/app"
scp -o StrictHostKeyChecking=no -i ~/.ssh/id_rsa -r ./*
ec2-user@<204.236.202.80>:/home/ec2-user/app
- name: Deploy application
run: |
ssh -o StrictHostKeyChecking=no -i ~/.ssh/id_rsa ec2-user@<204.236.202.80>

-name: aws ec2 run-instances \
run: |

    --image-id i-0cd2c773a95a9db72 \
    --instance-type t2.micro \
    --subnet-id subnet-05d09a5059867c362 \
    --security-group-ids sg-0ee99d727995d57f9 \
    --associate-public-ip-address  204.236.202.80\
    --key-name keys.pem
